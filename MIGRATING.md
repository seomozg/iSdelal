# –ú–∏–≥—Ä–∞—Ü–∏—è —Å test-domain.ru –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **—Ä–∞–Ω—å—à–µ —Ä–∞–±–æ—Ç–∞–ª–æ –Ω–∞ test-domain.ru**, —ç—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:

1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** (Qdrant –∫–æ–ª–ª–µ–∫—Ü–∏–∏)
2. **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–¥–∞** –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
3. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É** –ª–æ–∫–∞–ª—å–Ω–æ
4. **–î–µ–ø–ª–æ–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –Ω–∞–∑–∞–¥ –Ω–∞ —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä

---

## üì¶ –®–∞–≥ 1: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ Qdrant —Å —Å–µ—Ä–≤–µ—Ä–∞

### –°–æ–∑–¥–∞—Ç—å backup

–ù–∞ **test-domain.ru** —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –°—Ç–æ–ø–Ω—É—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
# –ò–õ–ò –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å backup –≤ —Ñ–æ–Ω–µ (Qdrant —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)

# –°–ø–æ—Å–æ–± 1: –ü—Ä–æ—Å—Ç–æ–π tar archive
docker compose exec qdrant tar czf /tmp/qdrant_backup.tar.gz /qdrant/storage

# –°–ø–æ—Å–æ–± 2: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
docker compose cp qdrant:/qdrant/storage ./qdrant_data_backup

# –°–ø–æ—Å–æ–± 3: Docker volume backup
docker run --rm -v qdrant_storage:/data -v $(pwd):/backup \
  alpine tar czf /backup/qdrant_backup_$(date +%Y%m%d).tar.gz /data
```

### –°–∫–∞—á–∞—Ç—å backup –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (Windows/Mac/Linux):
scp user@test-domain.ru:/path/to/qdrant_backup.tar.gz ~/Downloads/
# –ò–õ–ò –µ—Å–ª–∏ —Ñ–∞–π–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
docker compose cp container_name:/tmp/qdrant_backup.tar.gz ~/Downloads/
```

---

## üìù –®–∞–≥ 2: –ö–æ–¥ —Å —Å–µ—Ä–≤–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç –ê: Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ test-domain.ru —É–∂–µ –∏–∑ GitHub:

```powershell
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ - –ø—Ä–æ—Å—Ç–æ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ
git clone https://github.com/yourusername/iSdelal.git
cd iSdelal
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: SCP (–µ—Å–ª–∏ –∫–æ–¥ –Ω–µ –≤ Git)

```bash
# –°–∫–∞—á–∞—Ç—å –≤–µ—Å—å –∫–æ–¥ —Å–æ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
scp -r user@test-domain.ru:/opt/iSdelal ~/Desktop/dev/

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Git –ª–æ–∫–∞–ª—å–Ω–æ
cd ~/Desktop/dev/iSdelal
git init
git add .
git commit -m "Migrate from test-domain.ru"
```

---

## üîÑ –®–∞–≥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Qdrant –ª–æ–∫–∞–ª—å–Ω–æ

### –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å backup

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker compose up -d qdrant

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
sleep 5

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
docker compose exec qdrant tar xzf /backup/qdrant_backup.tar.gz -C /

# –ò–õ–ò –µ—Å–ª–∏ —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π tar:
tar xzf ~/Downloads/qdrant_backup.tar.gz
# –ó–∞—Ç–µ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ volume:
docker compose cp ./qdrant/storage/. qdrant:/qdrant/storage/
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏
curl http://localhost:6333/collections | jq

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
curl http://localhost:6333/collections/your_collection_name | jq '.result.points_count'
```

---

## ‚öôÔ∏è –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π .env

```bash
cd backend

# –ï—Å–ª–∏ .env –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω —Å–æ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env:
nano .env
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–∞–º:
# OPENAI_API_KEY=sk-...
# API_KEY=...  (—Å—Ç–∞—Ä—ã–π –∫–ª—é—á —Å–æ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
```

---

## üß™ –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

```powershell
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
docker compose up --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
curl -H "X-API-Key: your-api-key" http://localhost:8081/api/health

# –ß–∞—Ç —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
curl -X POST "http://localhost:8081/api/chat" `
  -H "Content-Type: application/json" `
  -H "X-API-Key: your-api-key" `
  -d '{
    "question": "Test question",
    "collection": "your_collection_name"
  }'
```

---

## üöÄ –®–∞–≥ 6: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ test-domain.ru

### –ü–æ—Å–ª–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ:

```powershell
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
git add .
git commit -m "Fix: improvements"
git push origin main
```

### –ù–∞ test-domain.ru —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/iSdelal

# –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
git remote set-url origin https://github.com/yourusername/iSdelal.git

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–¥–∞–Ω–Ω—ã–µ Qdrant —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è)
docker compose up --build -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
curl https://test-domain.ru/api/health
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –°—Ç–∞—Ä–æ–µ vs –ù–æ–≤–æ–µ

| –ß—Ç–æ | –†–∞–Ω—å—à–µ (test-domain.ru) | –¢–µ–ø–µ—Ä—å (–ª–æ–∫–∞–ª—å–Ω–æ) |
|-----|------------------------|-------------------|
| **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ | –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ ‚úì |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ü—Ä—è–º–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ | –õ–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ deploy ‚úì |
| **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | Git + GitHub ‚úì |
| **CI/CD** | –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π | GitHub Actions ‚úì |
| **–û—Ç–∫–∞—Ç—ã** | –°–ª–æ–∂–Ω–æ | `git checkout` ‚úì |
| **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è** | –°–ª–æ–∂–Ω–æ | GitHub PR & reviews ‚úì |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | –ü–æ–ª–Ω–∞—è ‚úì |

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ –°–¥–µ–ª–∞–π—Ç–µ:
- [ ] –ó–≤–µ—Ä–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –Ω–∞ GitHub –∫–∞–∫ Secrets
- [ ] –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `backend/.env`
- [ ] –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è dev –∏ prod (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –û–±–Ω–æ–≤–∏—Ç–µ HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### ‚ùå –ù–µ –¥–µ–ª–∞–π—Ç–µ:
- ‚ùå –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `backend/.env` —Ñ–∞–π–ª (–æ–Ω –≤ `.gitignore`!)
- ‚ùå –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ OPENAI_API_KEY –≤ GitHub
- ‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ backup –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –°–¥–µ–ª–∞–ª backup Qdrant –¥–∞–Ω–Ω—ã—Ö —Å test-domain.ru
- [ ] –°–∫–∞—á–∞–ª backup –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–ª/—Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –∫–æ–¥ —Å–æ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª Qdrant –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏–ª `.env` –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª API –ª–æ–∫–∞–ª—å–Ω–æ - —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- [ ] –ü—É—à–∏–ª –∫–æ–¥ –Ω–∞ GitHub
- [ ] test-domain.ru —Ç—è–Ω–µ—Ç –∫–æ–¥ —Å GitHub
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ test-domain.ru —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ü–æ—Ç–µ—Ä—è–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ Qdrant?

–ï—Å–ª–∏ backup –±—ã–ª, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
```bash
# –ù–∞ —Å—Ç–∞—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
scp user@test-domain.ru:/backup/qdrant_backup.tar.gz .
# –†–∞—Å–ø–∞–∫—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
```

### –ö–æ–¥ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å–µ—Ä–≤–µ—Ä–æ–º?

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ GitHub:
git status                    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
git pull origin main          # –û–±–Ω–æ–≤–∏—Ç—å —Å GitHub
docker compose up --build -d  # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
```

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ –≤–∏–¥–Ω—ã –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è?

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
docker compose exec qdrant ls -la /qdrant/storage/

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Qdrant
docker compose restart qdrant
sleep 5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—â–µ —Ä–∞–∑
curl http://localhost:6333/collections
```

---

## üìñ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–õ–æ–∫–∞–ª—å–Ω–æ:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **GitHub:** Push –∫–æ–¥–∞ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
3. **test-domain.ru:** `git pull + docker compose up -d`

**–≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É!** üéØ

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

1. **–°–æ–∑–¥–∞–π—Ç–µ deploy —Å–∫—Ä–∏–ø—Ç** –Ω–∞ test-domain.ru:
```bash
#!/bin/bash
cd /opt/iSdelal
git pull origin main
docker compose up --build -d
echo "Deploy complete!"
```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ branch protection** –Ω–∞ GitHub:
   - –¢—Ä–µ–±—É–π—Ç–µ PR –¥–ª—è merge –≤ main
   - –¢—Ä–µ–±—É–π—Ç–µ passing tests
   - –¢—Ä–µ–±—É–π—Ç–µ reviews

3. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ backups**:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2 AM:
# 0 2 * * * cd /opt/iSdelal && docker compose exec qdrant tar czf /backup/qdrant_$(date +\%Y\%m\%d).tar.gz /qdrant/storage
```

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–µ–≥—á–µ, –∞ –¥–µ–ø–ª–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ. üöÄ
